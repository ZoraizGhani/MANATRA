{% liquid
  assign slide_count = section.blocks.size
%}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css">

<section
  class="section-testimonials color-{{ section.settings.color_scheme }}"
  style="
    background-color: {{ section.settings.section_bg }};
    {% if section.settings.background_image != blank %}
      background-image: url('{{ section.settings.background_image | image_url: width: 2000 }}');
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
    {% endif %}
    padding-top: {{ section.settings.padding_top_desktop }}px;
    padding-bottom: {{ section.settings.padding_bottom_desktop }}px;
    padding-left: {{ section.settings.padding_left_desktop }}px;
    padding-right: {{ section.settings.padding_right_desktop }}px;
  "
>

  <div class="testimonials-wrapper">

    {% if section.settings.heading != blank %}
      <h2 class="testimonials-title">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <div class="testimonials-stage">

      {% if slide_count > 0 %}
        <div class="swiper testimonials-swiper" id="testimonials-{{ section.id }}">
          <div class="swiper-wrapper">

            {% for block in section.blocks %}
              {% assign s = block.settings %}
              <div class="swiper-slide testimonial-card" {{ block.shopify_attributes }}>
                <div class="testimonial-inner">

                  {% if s.rating > 0 %}
                    <div class="stars">
                      {% for i in (1..5) %}
                        <span class="{% if i <= s.rating %}active{% endif %}">â˜…</span>
                      {% endfor %}
                    </div>
                  {% endif %}

                  {% if s.avatar != blank %}
                    <div class="avatar">
                      {{
                        s.avatar
                        | image_url: width: 120
                        | image_tag: class: 'avatar-img', loading: 'lazy'
                      }}
                    </div>
                  {% endif %}

                  <div class="content">
                    <h3 class="testimonial-name">{{ s.name }}</h3>
                    <p class="testimonial-subtitle">{{ s.subtitle }}</p>
                    <p class="testimonial-quote">{{ s.quote }}</p>
                  </div>

                </div>
              </div>
            {% endfor %}

          </div>
        </div>

        <div class="nav-wrapper ">
          <div class="swiper-button-prev navinside"><svg width="109" height="109" viewBox="0 0 109 109" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="40.3421" cy="40.3421" r="39.3581" transform="matrix(-0.887022 0.461727 0.461727 0.887022 71.5686 0)" fill="white" stroke="black" stroke-width="1.96791"/>
            <circle cx="40.3421" cy="40.3421" r="39.3581" transform="matrix(-0.887022 0.461727 0.461727 0.887022 71.5686 0)" fill="white" stroke="black" stroke-width="1.96791"/>
            <path d="M74.3752 53.339C76.0039 53.4102 77.2666 54.7882 77.1954 56.4169C77.1243 58.0456 75.7462 59.3083 74.1175 59.2371L74.2464 56.2881L74.3752 53.339ZM32.7494 56.5645C31.648 55.3626 31.7296 53.4953 32.9315 52.394L52.519 34.4462C53.721 33.3449 55.5883 33.4264 56.6896 34.6284C57.791 35.8304 57.7094 37.6976 56.5074 38.799L39.0963 54.7525L55.0499 72.1636C56.1512 73.3656 56.0697 75.2329 54.8677 76.3342C53.6657 77.4356 51.7985 77.354 50.6971 76.152L32.7494 56.5645ZM74.2464 56.2881L74.1175 59.2371L34.7969 57.5194L34.9257 54.5703L35.0546 51.6213L74.3752 53.339L74.2464 56.2881Z" fill="black"/>
            </svg>
            
            
            </div>
          <div class="swiper-button-next navinside"><svg width="109" height="109" viewBox="0 0 109 109" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="54.4113" cy="54.4113" r="39.3581" transform="rotate(27.4986 54.4113 54.4113)" fill="white" stroke="black" stroke-width="1.96791"/>
            <circle cx="54.4113" cy="54.4113" r="39.3581" transform="rotate(27.4986 54.4113 54.4113)" fill="white" stroke="black" stroke-width="1.96791"/>
            <path d="M34.4475 53.339C32.8188 53.4102 31.5561 54.7882 31.6273 56.4169C31.6984 58.0456 33.0764 59.3083 34.7051 59.2371L34.5763 56.2881L34.4475 53.339ZM76.0733 56.5645C77.1747 55.3626 77.0931 53.4953 75.8911 52.394L56.3036 34.4462C55.1017 33.3449 53.2344 33.4264 52.1331 34.6284C51.0317 35.8304 51.1133 37.6976 52.3152 38.799L69.7264 54.7525L53.7728 72.1636C52.6714 73.3656 52.753 75.2329 53.955 76.3342C55.157 77.4356 57.0242 77.354 58.1256 76.152L76.0733 56.5645ZM34.5763 56.2881L34.7051 59.2371L74.0258 57.5194L73.8969 54.5703L73.7681 51.6213L34.4475 53.339L34.5763 56.2881Z" fill="black"/>
            </svg>
            </div>
        </div>

      {% endif %}

    </div>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  new Swiper('#testimonials-{{ section.id }}', {
    slidesPerView: 1.1,
    spaceBetween: 20,
    centeredSlides: false,

    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev'
    },

    breakpoints: {
      768: {
        slidesPerView: 2.3,
        spaceBetween: 30
      }
    }
  });
});
</script>

<style>
.section-testimonials {
  width: 100%;
  position: relative;
  overflow: hidden;

  height:1000px;
}

.section-testimonials::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, {{ section.settings.bg_overlay_opacity }});
  z-index: 1;
}

.testimonials-wrapper {
  max-width 100%;
  margin: 0 auto;
  position: relative;
  z-index: 2;
}

.testimonials-title {
  text-align: center;
  margin-bottom: 60px;
  font-size: {{ section.settings.heading_size_desktop }}px;
  font-weight: {{ section.settings.heading_weight }};
  line-height: {{ section.settings.heading_line_height_desktop }};
}

.testimonials-stage {
  position: relative;
}


.nav-wrapper {
  position: relative;

  justify-content: space-between;
 
  padding-right: 40px;
}
.testimonials-stage .swiper-wrapper {
  padding-bottom: 70px !important;
}
.testimonials-swiper {
  position: relative;
  z-index: 2;
  padding-bottom: 60px;
}
p.testimonial-quote {

  color:#133240 !important;
  margin-top: 14px !important;
}
.navinside{
background:transparent !important;
border:unset !important;
width:80px !important;

}

.navinside::after{
 display:none !important;
  
  
  }
.testimonial-inner .avatar {
  margin-bottom: 16px;
}
.testimonial-inner {
  background: #fff;
  border-radius: 40px;
  padding: 40px;
 
  text-align: left;
  position: relative;
}

.stars {
  position: absolute;
  top: 30px;
  right: 30px;
  color: #e0e0e0;
  font-size: 14px;
}

.stars .active {
  color: #F8A401;
}
.stars span {
 
  font-size: 30px !important;
}
.avatar-img {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  object-fit: cover;
}

.testimonial-name {

  color:#133240 !important;
  margin: 10px 0 4px;
  font-size: {{ section.settings.name_size_desktop }}px;
  font-weight: {{ section.settings.name_weight }};
}

.testimonial-subtitle {
  font-size: {{ section.settings.subtitle_size_desktop }}px;
  opacity: .6;
  margin-bottom: 12px;
}

.testimonial-quote {
  font-size: {{ section.settings.quote_size_desktop }}px;
  line-height: {{ section.settings.quote_line_height_desktop }};
  color: #444;
}

.nav-wrapper {
  position: relative;
  z-index: 3;
  display: flex;
  
  gap: 20px;
  margin-top: -20px;
}

.swiper-button-prev,
.swiper-button-next {
  position: relative;
  width: 44px;
  height: 44px;
  background: #fff;
  border-radius: 50%;
  border: 1px solid #ddd;
}

.swiper-button-prev::after,
.swiper-button-next::after {
  font-size: 16px;
  color: #000;
}
h2.testimonials-title {
  text-align: left;
}
@media(max-width: 767px){
  .section-testimonials {
    padding-top: {{ section.settings.padding_top_mobile }}px !important;
    padding-bottom: {{ section.settings.padding_bottom_mobile }}px !important;
    padding-left: {{ section.settings.padding_left_mobile }}px !important;
    padding-right: {{ section.settings.padding_right_mobile }}px !important;
  }

  .testimonials-title {
    font-size: {{ section.settings.heading_size_mobile }}px;
    line-height: {{ section.settings.heading_line_height_mobile }};
    margin-bottom: 40px;
  }

  .testimonial-name {
    font-size: {{ section.settings.name_size_mobile }}px;
  }

  .testimonial-subtitle {
    font-size: {{ section.settings.subtitle_size_mobile }}px;
  }

  .testimonial-quote {
    font-size: {{ section.settings.quote_size_mobile }}px;
    line-height: {{ section.settings.quote_line_height_mobile }};
  }
}
</style>

{% schema %}
{
  "name": "Testimonials Carousel",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "What People Are Saying" },
    { "type": "image_picker", "id": "background_image", "label": "Section Background Image" },

    { "type": "color", "id": "section_bg", "label": "Section Background Color", "default": "#f6f6f6" },

    {
      "type": "range",
      "id": "bg_overlay_opacity",
      "label": "Background Overlay Opacity",
      "min": 0,
      "max": 1,
      "step": 0.1,
      "default": 0.0
    },

    { "type": "header", "content": "Desktop Padding" },
    { "type": "range", "id": "padding_top_desktop", "label": "Top", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 80 },
    { "type": "range", "id": "padding_bottom_desktop", "label": "Bottom", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 80 },
    { "type": "range", "id": "padding_left_desktop", "label": "Left", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 20 },
    { "type": "range", "id": "padding_right_desktop", "label": "Right", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 20 },

    { "type": "header", "content": "Mobile Padding" },
    { "type": "range", "id": "padding_top_mobile", "label": "Top", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 40 },
    { "type": "range", "id": "padding_bottom_mobile", "label": "Bottom", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 40 },
    { "type": "range", "id": "padding_left_mobile", "label": "Left", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 16 },
    { "type": "range", "id": "padding_right_mobile", "label": "Right", "min": 0, "max": 200, "step": 4, "unit": "px", "default": 16 },

    { "type": "header", "content": "Typography - Desktop" },
    { "type": "range", "id": "heading_size_desktop", "label": "Heading Size", "min": 20, "max": 100, "step": 1, "unit": "px", "default": 42 },
    { "type": "range", "id": "heading_line_height_desktop", "label": "Heading Line Height", "min": 1, "max": 2, "step": 0.1, "default": 1.2 },

    { "type": "range", "id": "name_size_desktop", "label": "Name Size", "min": 12, "max": 30, "step": 1, "unit": "px", "default": 16 },
    { "type": "range", "id": "subtitle_size_desktop", "label": "Subtitle Size", "min": 10, "max": 22, "step": 1, "unit": "px", "default": 13 },
    { "type": "range", "id": "quote_size_desktop", "label": "Quote Size", "min": 10, "max": 26, "step": 1, "unit": "px", "default": 14 },
    { "type": "range", "id": "quote_line_height_desktop", "label": "Quote Line Height", "min": 1, "max": 2.5, "step": 0.1, "default": 1.7 },

    { "type": "header", "content": "Typography - Mobile" },
    { "type": "range", "id": "heading_size_mobile", "label": "Heading Size", "min": 16, "max": 60, "step": 1, "unit": "px", "default": 28 },
    { "type": "range", "id": "heading_line_height_mobile", "label": "Heading Line Height", "min": 1, "max": 2, "step": 0.1, "default": 1.2 },

    { "type": "range", "id": "name_size_mobile", "label": "Name Size", "min": 12, "max": 26, "step": 1, "unit": "px", "default": 15 },
    { "type": "range", "id": "subtitle_size_mobile", "label": "Subtitle Size", "min": 10, "max": 20, "step": 1, "unit": "px", "default": 12 },
    { "type": "range", "id": "quote_size_mobile", "label": "Quote Size", "min": 10, "max": 22, "step": 1, "unit": "px", "default": 13 },
    { "type": "range", "id": "quote_line_height_mobile", "label": "Quote Line Height", "min": 1, "max": 2.5, "step": 0.1, "default": 1.6 },

    { "type": "range", "id": "heading_weight", "label": "Heading Font Weight", "min": 300, "max": 900, "step": 100, "default": 400 },
    { "type": "range", "id": "name_weight", "label": "Name Font Weight", "min": 300, "max": 900, "step": 100, "default": 600 }
  ],

  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        { "type": "image_picker", "id": "avatar", "label": "Avatar" },
        { "type": "text", "id": "name", "label": "Name", "default": "Floyd Miles" },
        { "type": "text", "id": "subtitle", "label": "Subtitle", "default": "Customer" },
        { "type": "range", "id": "rating", "label": "Rating", "min": 1, "max": 5, "step": 1, "default": 5 },
        { "type": "textarea", "id": "quote", "label": "Quote", "default": "Most drinks push too hard..." }
      ]
    }
  ],

  "presets": [
    { "name": "Testimonials Carousel" }
  ]
}
{% endschema %}