{% schema %}
{
  "name": "Review Slider (Swiper)",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Customer Reviews"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "Avatar Image"
        },
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Review Text",
          "default": "Gives me steady focus and mental clarity without feeling jittery."
        },
        {
          "type": "range",
          "id": "stars",
          "label": "Stars",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        }
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    {
      "name": "Review Slider (Swiper)",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<section class="review-slider-section">
  <div class="section--page-widths">
    
    {% if section.settings.heading != blank %}
      <h2 class="review-slider-heading">{{ section.settings.heading }}</h2>
    {% endif %}

    <div class="swiper reviewSwiper">
      <div class="swiper-wrapper">

        {% for block in section.blocks %}
          <div class="swiper-slide" {{ block.shopify_attributes }}>
            <div class="review-card">

              <div class="review-avatar">
                {% if block.settings.avatar != blank %}
                  <img src="{{ block.settings.avatar | image_url: width: 120 }}" alt="Avatar">
                {% else %}
                  <img src="https://via.placeholder.com/80" alt="Avatar">
                {% endif %}
              </div>

              <div class="review-content">
                <p class="review-text">{{ block.settings.review_text }}</p>

                <div class="review-stars">
                  {% assign rating = block.settings.stars %}
                  {% for i in (1..5) %}
                    {% if i <= rating %}
                      <span class="star filled">★</span>
                    {% else %}
                      <span class="star">☆</span>
                    {% endif %}
                  {% endfor %}
                </div>
              </div>

            </div>
          </div>
        {% endfor %}

      </div>

      {% comment %} <!-- Pagination -->
      <div class="swiper-pagination"></div>

      <!-- Navigation -->
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div> {% endcomment %}
    </div>

  </div>
</section>

<!-- Swiper CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<style>
.review-slider-section {
  padding: 0px 0;
}
@media only screen and (min-width:767px){
   .reviewSwiper {
    max-width: 700px;
    margin-left: 0;
  
    z-index:222px;
    margin-top: -522px;
    /* margin-bottom: 103px; */
    position: absolute !important;
  
    }

    .section--page-widths{
        padding-left: 50px !important;
    
    }
    .review-avatar img {
        margin-top: -76px;
        width: 138px !important;
        height: 138px;
    }


}


.reviewSwiper .swiper-slide{

padding-top:100px;

}
.reviewSwiper {
    border-radius: 16px;
}
.section--page-widths{
max-width:1315px !important;
padding:0 16px;

}
.review-slider-heading {
  text-align: center;
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 30px;
}

.review-card {
    background: rgba(255, 255, 255, 0.35); /* semi transparent */
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
  border-radius: 16px;
  padding: 50px;
  display: flex;
  gap: 18px;
  align-items: flex-start;
  border: 0.77px solid;

  border-image-source: radial-gradient(0% 50% at 50% 50%, #0F0F0F 0%, rgba(21, 21, 21, 0) 100%),
  radial-gradient(198.89% 50% at 50% 50%, #0A7ABF 0%, rgba(255, 255, 255, 0.7) 100%),
  radial-gradient(170.42% 50% at 50% 50%, #000000 0%, #000000 100%);
  
  backdrop-filter: blur(32.21833038330078px);
  

}
.review-card {
    display: flex;
    flex-direction: column;
    padding-top: 0px;
    /* margin-top: -20px; */
}
.review-avatar img {
 
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #ddd;
}

.review-content {
  flex: 1;
}

.review-text {
  font-size: 32px;
  color: #000000;
  line-height: 110%;
  margin: 0 0 16px;
}

.review-stars {
  font-size: 32px;
  letter-spacing: 4px;
}

.review-stars .star {
  color: #000;
}

.review-stars .filled {
  color: #000;
}

.reviewSwiper {
  padding-bottom: 50px;
}

/* Swiper buttons */
.reviewSwiper .swiper-button-next,
.reviewSwiper .swiper-button-prev {
  color: black;
}

/* Swiper pagination */
.reviewSwiper .swiper-pagination-bullet {
  background: black;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
  new Swiper(".reviewSwiper", {
    slidesPerView: 1,
    spaceBetween: 0,
    loop: true,
    autoplay: {
      delay: 2500,
      disableOnInteraction: false
    },
    pagination: {
      el: ".swiper-pagination",
      clickable: true
    },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev"
    }
  });
});
</script>